<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Events | Alpins | Mountain And Trekking Template</title>
    <meta name="description" content="">
    <script src="themekit/scripts/jquery.min.js"></script>
    <script src="themekit/scripts/main.js"></script>
    <link rel="stylesheet" href="themekit/css/bootstrap-grid.css">
    <link rel="stylesheet" href="themekit/css/style.css">
    <link rel="stylesheet" href="themekit/css/glide.css">
    <link rel="stylesheet" href="themekit/css/magnific-popup.css">
    <link rel="stylesheet" href="themekit/css/content-box.css">
    <link rel="stylesheet" href="themekit/css/media-box.css">
    <link rel="stylesheet" href="themekit/css/contact-form.css">
    <link rel="stylesheet" href="skin.css">
    <link rel="icon" href="imagenes/favicon.png">
</head>
<body class="page-main">
    <div id="preloader"></div>
    <nav class="menu-classic menu-fixed align-right" data-menu-anima="fade-in">
        <div class="container">
            <div class="menu-brand">
                <a href="index.html">
                    <img class="logo-default scroll-hide" src="media/LOGO COLOR VECTORIZADO.png" alt="logo" />
                    <img class="logo-retina scroll-hide" src="media/LOGO COLOR VECTORIZADO.png" alt="logo" />
                    <img class="logo-default scroll-show" src="media/lgoo-dos.png" alt="logo" />
                    <img class="logo-retina scroll-show" src="media/lgoo-dos.png" alt="logo" />
                </a>
            </div>
            <i class="menu-btn"></i>
            <div class="menu-cnt">
                                <ul id="main-menu">
                    <li class="dropdown">
                        <a href="index.html">Inicio</a>
                    </li>

                    <li class="dropdown">
                        <a href="#">Paginas</a>
                        <ul>
                            <li>
                                <a href="about.html">Acerca de</a>
                            </li>
                            <li class="dropdown-submenu">
                                <a>Imperdibles</a>
                                <ul>
                                    <li><a href="food.html">Restaurantes</a></li>
                                    <li><a href="shelters.html">hospedajes</a></li>
                                    <li><a href="events.html">Eventos</a></li>
                                </ul>
                            </li>
                            <li class="dropdown-submenu">
                                <a>Explora Más</a>
                                <ul>
                                    <li><a href="history.html">historia</a></li>
                                    <li><a href="gallery.html">galeria</a></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="treks.html">Caminatas</a>
                    </li>
                    <li>
                        <a href="blog.html">Blog</a>
                    </li>
                    <li>
                        <a href="contacts.html">Contacto</a>
                    </li>
                </ul>

            </div>

            </div>
        </div>
    </nav>
    <header class="header-image ken-burn-center light" data-parallax="true" data-natural-height="1080" data-natural-width="1920" data-bleed="0" data-image-src="imagenes/laguna%20rica.jpg" data-offset="0">
        <div class="container">
            <h1>The events</h1>
            <h2>Spring is nature way of saying let's party!</h2>
            <ol class="breadcrumb">
                <li><a href="index.html">Home</a></li>
                <li><a href="#">Pages</a></li>
                <li><a href="#">Events</a></li>
            </ol>
        </div>
    </header>
    <main>
        <section class="section-base ">
            <div class="container">
                <div class="row">
                    <div class="col-lg-9">
                        <!-- Eventos dinámicos del backend -->
                        <div id="eventos-dinamicos" class="grid-list gap-60 events-list" data-columns="1" data-gap="60">
                            <div class="grid-box">
                                <!-- Los eventos se cargarán aquí -->
                            </div>
                        </div>

                        <!-- Eventos estáticos (backup) -->
                        <div id="eventos-estaticos" class="grid-list gap-60 events-list" data-columns="1" data-gap="60" style="display: none;">
                            <div class="grid-box">
                                <div class="grid-item">
                                    <div class="cnt-box cnt-box-side">
                                        <a href="#" class="img-box"><img src="imagenes/La Peña.jpg" alt="" /></a>
                                        <div class="caption">
                                            <h2>Sunshine and wine</h2>
                                            <span class="extra-field">01 October 2019 at 8.00 PM</span>
                                            <p>
                                                Lorem ipsum dolor sit amet consectetur adipiscing elitsed do eiusmod tempor incididunt utlabore et dolore magna aliqua.
                                                Utenim ad minim veniam quis nostrud exercitation ullamco laboris.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="grid-item">
                                    <div class="cnt-box cnt-box-side">
                                        <a href="#" class="img-box"><img src="imagenes/montaña cordi.jpg" alt="" /></a>
                                        <div class="caption">
                                            <h2>Classic guitar sounds</h2>
                                            <span class="extra-field">11 January 2024 at 7.00 PM</span>
                                            <p>
                                                Lorem ipsum dolor sitamet consectetur adipisicing elito sed do ctetur adipis or sitamet consecelito sed ing elitsed do eiusmod eiusmod tempore.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="grid-item">
                                    <div class="cnt-box cnt-box-side">
                                        <a href="#" class="img-box"><img src="imagenes/iglesia.jpg" alt="" /></a>
                                        <div class="caption">
                                            <h2>Cheese and salumes</h2>
                                            <span class="extra-field">20 January 2024 at 8.00 PM</span>
                                            <p>
                                                Lorem ipsum dolor sitamet consectetur adipisicing elito sed doctetrud exercitation ullamco laborisur adipiscing elitsed do eiusmod eiusmod tempore.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="grid-item">
                                    <div class="cnt-box cnt-box-side">
                                        <a href="#" class="img-box"><img src="imagenes/el tilin.JPG" alt="" /></a>
                                        <div class="caption">
                                            <h2>Fire with movie</h2>
                                            <span class="extra-field">17 September 2024 at 9.00 PM</span>
                                            <p>
                                                Lorem ipsum dolor sitamet consectetur adipisicing elito sed drun ullamco laboriso eiusmod tempore boriso eiusmod tctetur adipiscing elitsed eiusmod.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="grid-item">
                                    <div class="cnt-box cnt-box-side">
                                        <a href="#" class="img-box"><img src="imagenes/favorita dos.jpg" alt="" /></a>
                                        <div class="caption">
                                            <h2>Redbull Race</h2>
                                            <span class="extra-field">31 October 2024 at 8.00 PM</span>
                                            <p>
                                                Lorem ipsum dolor sitamet conse elito sed ctetur adipisicing elito sedrud exercitation ullamco laboris do eiusmod tempore.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="list-pagination">
                                <ul class="pagination" data-page-items="4" data-pagination-anima="fade-bottom" data-options="scrollTop:true"></ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <a href="#" class="media-box media-box-half" data-anima="pulse" data-time="2000">
                            <img alt="" src="imagenes/colibrie verde descansa.jpg">
                            <div class="caption">
                                <h2>Sound of silence</h2>
                                <span class="extra-field">01 March 2019 at 8 PM</span>
                                <p class="text-xs">
                                    Lorem ipsum dolore consectetur adipisicing elito incididunto pertinole.
                                </p>
                            </div>
                        </a> 
                        <hr class="space" />
                        <div class="icon-box icon-box-top boxed-area">
                            <i class="im-sunglasses-w2"></i>
                            <div class="caption">
                                <h3>Event organizers</h3>
                                <p>We're searching for event organizers</p>
                            </div>
                        </div>
                        <hr class="space-sm" />
                        <div class="icon-box icon-box-top boxed-area">
                            <i class="im-speach-bubbles"></i>
                            <div class="caption">
                                <h3>Need help?</h3>
                                <p>Contact us if have any event inquery</p>
                            </div>
                        </div>
                    </div>
                </div>        
            </div>
        </section>  
    </main>
    <footer class="light">
        <div class="container">
            <div class="row">
                <div class="col-lg-4">
                    <h3>Cómbita</h3>
                    <p>En algún lugar entre el inicio de la ascensión y la cima, se encuentra la respuesta al misterio
                        de por qué subimos.</p>

                </div>
                <div class="col-lg-4">
                    <h3>Contacto</h3>
                    <ul class="icon-list icon-line">
                        <li>Cómbita, Boyacá, Colombia</li>
                        <li>alcaldia@combita-boyaca.gov.co</li>
                        <li> 313 366232</li>
                    </ul>
                </div>
                <div class="col-lg-4">
                    <div class="icon-links icon-social icon-links-grid social-colors">
                        <a class="facebook"><i class="icon-facebook"></i></a>
                        <a class="instagram"><i class="icon-instagram"></i></a>
                        <a class="x"><i class="icon-twitter"></i></a> <!-- X represents the new Twitter -->
                        <a class="youtube"><i class="icon-youtube"></i></a>
                    </div>
                    <hr class="space-sm" />
                    <p>Siguenos en nuestras redes</p>
                </div>

            </div>
        </div>
        <div class="footer-bar">
            <div class="container">
                <span>© 2024 Santiago Quiroga Molina <a href="https://santiago-developer.netlify.app/"
                        target="_blank">santiago-developer.com</a>.</span>
                <span><a href="contacts.html">Contacto</a> | <a href="#">Privacy policy</a></span>
            </div>
        </div>
    </footer>
    <script src="themekit/scripts/parallax.min.js"></script>
    <script src="themekit/scripts/glide.min.js"></script>
    <script src="themekit/scripts/imagesloaded.min.js"></script>

    <!-- Integración con Backend para Eventos -->
    <script src="api-config.js"></script>
    <script>
        // Cargar eventos desde el backend
        document.addEventListener('DOMContentLoaded', function() {
            const API_URL = window.API_CONFIG ? window.API_CONFIG.API_URL : 'http://localhost:3000/api';

            // Mostrar loading
            const dinamicos = document.getElementById('eventos-dinamicos');
            if (dinamicos) {
                const gridBox = dinamicos.querySelector('.grid-box');
                if (gridBox) {
                    gridBox.innerHTML = '<div style="text-align:center; padding:40px;"><i class="fas fa-spinner fa-spin" style="font-size:30px; color:#699073;"></i><p>Cargando eventos...</p></div>';
                }
            }

            // Cargar eventos desde backend
            fetch(`${API_URL}/eventos?activo=true`)
                .then(response => response.json())
                .then(data => {
                    if (data.success && data.data && data.data.length > 0) {
                        renderizarEventos(data.data);
                    } else {
                        mostrarEventosEstaticos();
                    }
                })
                .catch(error => {
                    console.log('Usando eventos estáticos:', error);
                    mostrarEventosEstaticos();
                });
        });

        function renderizarEventos(eventos) {
            const contenedor = document.getElementById('eventos-dinamicos');
            if (!contenedor) return;

            const gridBox = contenedor.querySelector('.grid-box');
            if (!gridBox) return;

            let html = '';
            eventos.forEach(evento => {
                // Formatear fecha
                const fecha = new Date(evento.fecha);
                const meses = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio',
                               'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];
                const fechaFormateada = `${fecha.getDate()} ${meses[fecha.getMonth()]} ${fecha.getFullYear()}`;
                const horaFormateada = `${evento.hora_inicio || '10:00'} - ${evento.hora_fin || '18:00'}`;

                // Formatear precio
                const precioTexto = evento.precio === 0 ? 'Entrada Gratis' :
                    `Entrada: $${new Intl.NumberFormat('es-CO').format(evento.precio)}`;

                html += `
                    <div class="grid-item">
                        <div class="cnt-box cnt-box-side">
                            <a href="#" class="img-box">
                                <img src="${evento.imagen || 'imagenes/evento-default.jpg'}"
                                     alt="${evento.nombre}"
                                     onerror="this.src='imagenes/La Peña.jpg'" />
                            </a>
                            <div class="caption">
                                <h2>${evento.nombre}</h2>
                                <span class="extra-field">${fechaFormateada} | ${horaFormateada}</span>
                                <p>${evento.descripcion || 'Evento especial en Cómbita'}</p>
                                <div style="margin-top: 15px;">
                                    <p><strong>📍 Lugar:</strong> ${evento.lugar || 'Cómbita'}</p>
                                    <p><strong>🎫 ${precioTexto}</strong></p>
                                    ${evento.cupos ? `<p><strong>👥 Cupos disponibles:</strong> ${evento.cupos}</p>` : ''}
                                    ${evento.categoria ? `<p><strong>🏷️ Categoría:</strong> ${evento.categoria}</p>` : ''}
                                    ${evento.organizador ? `<p><strong>🏢 Organizador:</strong> ${evento.organizador}</p>` : ''}
                                </div>
                                ${evento.contacto_telefono || evento.contacto_email ? `
                                <div style="margin-top: 15px;">
                                    ${evento.contacto_telefono ? `
                                    <a href="tel:${evento.contacto_telefono}"
                                       style="display: inline-block; padding: 8px 16px; background: #699073; color: white; text-decoration: none; border-radius: 4px; margin-right: 10px;">
                                        📞 Llamar
                                    </a>` : ''}
                                    ${evento.contacto_email ? `
                                    <a href="mailto:${evento.contacto_email}"
                                       style="display: inline-block; padding: 8px 16px; background: #4a6e52; color: white; text-decoration: none; border-radius: 4px;">
                                        ✉️ Email
                                    </a>` : ''}
                                </div>` : ''}
                            </div>
                        </div>
                    </div>
                `;
            });

            gridBox.innerHTML = html;
        }

        function mostrarEventosEstaticos() {
            const dinamicos = document.getElementById('eventos-dinamicos');
            const estaticos = document.getElementById('eventos-estaticos');
            if (dinamicos) dinamicos.style.display = 'none';
            if (estaticos) estaticos.style.display = '';
        }
    </script>
</body>
</html>