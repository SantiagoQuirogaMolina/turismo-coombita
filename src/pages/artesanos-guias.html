<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Artesanos y Guías | Turismo Cómbita - Comunidad Local</title>
    <meta name="description" content="Conoce a los artesanos y guías turísticos de Cómbita, Boyacá. Tejidos en lana, cerámica, talla en madera y guías expertos para tus aventuras.">
    <script src="../assets/js/vendor/jquery.min.js"></script>
    <script src="../assets/js/vendor/main.js"></script>
    <link rel="stylesheet" href="../assets/css/vendor/bootstrap-grid.css">
    <link rel="stylesheet" href="../assets/css/vendor/style.css">
    <link rel="stylesheet" href="../assets/css/vendor/glide.css">
    <link rel="stylesheet" href="../assets/css/vendor/magnific-popup.css">
    <link rel="stylesheet" href="../assets/css/vendor/content-box.css">
    <link rel="stylesheet" href="../assets/css/vendor/media-box.css">
    <link rel="stylesheet" href="../assets/media/icons/fontawesome/all.css">
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/frailejon-theme.css">
    <link rel="icon" href="../assets/images/favicon.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* ===== Tarjeta de perfil ===== */
        .ag-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            margin-bottom: 30px;
        }
        .ag-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
        }

        .ag-card-img {
            height: 250px;
            overflow: hidden;
            position: relative;
            background: #f5f5f5;
        }
        .ag-card-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        .ag-card:hover .ag-card-img img {
            transform: scale(1.1);
        }
        .ag-card-img .ag-placeholder {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: #BC6C25;
            font-size: 50px;
            opacity: 0.3;
            background: linear-gradient(135deg, #faf6f0 0%, #f0ebe3 100%);
        }
        .ag-card-img .ag-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(105, 144, 115, 0.95);
            color: white;
            padding: 8px 16px;
            border-radius: 25px;
            font-size: 13px;
            font-weight: 600;
            backdrop-filter: blur(10px);
        }

        .ag-card-body {
            padding: 25px;
        }
        .ag-card-body h3 {
            color: #2d3e33;
            font-size: 22px;
            margin-bottom: 8px;
            font-weight: 600;
        }
        .ag-card-location {
            color: #BC6C25;
            font-size: 14px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        .ag-card-location i { margin-right: 8px; }

        .ag-card-desc {
            color: #666;
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        /* Meta tags */
        .ag-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 20px;
        }
        .ag-meta-tag {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            background: #f8f5f0;
            color: #666;
            padding: 5px 12px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: 500;
            border: 1px solid #ede8e0;
        }
        .ag-meta-tag i {
            color: #BC6C25;
            font-size: 11px;
        }

        /* Rutas conocidas */
        .ag-routes {
            margin-bottom: 20px;
            padding: 12px 15px;
            background: #f8fdf9;
            border-left: 3px solid #699073;
            border-radius: 0 5px 5px 0;
        }
        .ag-routes-label {
            font-size: 11px;
            font-weight: 700;
            color: #699073;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }
        .ag-routes p {
            font-size: 13px;
            color: #666;
            margin: 0;
            line-height: 1.5;
        }

        /* Botones de contacto */
        .ag-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            padding-top: 20px;
            border-top: 1px solid #f0f0f0;
        }
        .ag-btn {
            flex: 1;
            min-width: calc(50% - 5px);
            padding: 10px;
            text-align: center;
            border-radius: 3px;
            text-decoration: none;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }
        .ag-btn-whatsapp {
            background: #699073;
            color: white !important;
            border: 1px solid #699073;
        }
        .ag-btn-whatsapp:hover {
            background: #567760;
            border-color: #567760;
            transform: translateY(-2px);
        }
        .ag-btn-call {
            background: white;
            color: #BC6C25 !important;
            border: 1px solid #DDA15E;
        }
        .ag-btn-call:hover {
            background: #BC6C25;
            color: white !important;
            border-color: #BC6C25;
        }

        /* Empty & loading */
        .ag-empty {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }
        .ag-empty i {
            font-size: 50px;
            margin-bottom: 15px;
            display: block;
            opacity: 0.4;
        }

        /* CTA section */
        .ag-cta {
            background: #f8f5f0;
            padding: 60px 0;
            text-align: center;
            border-top: 3px solid #DDA15E;
        }
        .ag-cta h3 {
            font-size: 26px;
            font-weight: 700;
            color: #2d3e33;
            margin-bottom: 10px;
        }
        .ag-cta p {
            font-size: 15px;
            color: #666;
            margin-bottom: 25px;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }
        .ag-cta-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: #BC6C25;
            color: white !important;
            padding: 14px 32px;
            border-radius: 3px;
            font-weight: 600;
            font-size: 15px;
            text-decoration: none;
            transition: all 0.3s ease;
            border: 1px solid #BC6C25;
        }
        .ag-cta-btn:hover {
            background: #9a5820;
            border-color: #9a5820;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(188, 108, 37, 0.3);
        }

        @media (max-width: 768px) {
            .ag-card-img { height: 200px; }
        }
    </style>
</head>
<body class="page-main">
    <div id="preloader"></div>
    <nav class="menu-classic menu-fixed align-right" data-menu-anima="fade-in">
        <div class="container">
            <div class="menu-brand">
                <a href="./index.html">
                    <img class="logo-default scroll-hide" src="../assets/images/icons/LOGO COLOR VECTORIZADO.png" alt="logo" />
                    <img class="logo-retina scroll-hide" src="../assets/images/icons/LOGO COLOR VECTORIZADO.png" alt="logo" />
                    <img class="logo-default scroll-show" src="../assets/images/icons/lgoo-dos.png" alt="logo" />
                    <img class="logo-retina scroll-show" src="../assets/images/icons/lgoo-dos.png" alt="logo" />
                </a>
            </div>
            <i class="menu-btn"></i>
            <div class="menu-cnt">
                <ul id="main-menu">
                    <li class="dropdown"><a href="./index.html">Inicio</a></li>
                    <li class="dropdown">
                        <a href="#">Descubre</a>
                        <ul>
                            <li><a href="./about.html">Acerca de</a></li>
                            <li class="dropdown-submenu">
                                <a>Imperdibles</a>
                                <ul>
                                    <li><a href="./food.html">Restaurantes</a></li>
                                    <li><a href="./shelters.html">Hospedajes</a></li>
                                    <li><a href="./events.html">Eventos</a></li>
                                    <li><a href="./artesanos-guias.html">Artesanos y Guías</a></li>
                                </ul>
                            </li>
                            <li class="dropdown-submenu">
                                <a>Explora Más</a>
                                <ul>
                                    <li><a href="./history.html">Historia</a></li>
                                    <li><a href="./gallery.html">Galería</a></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li><a href="./treks/index.html">Caminatas</a></li>
                    <li class="dropdown">
                        <a href="#">Planifica</a>
                        <ul>
                            <li><a href="./transporte.html">Cómo Llegar</a></li>
                            <li><a href="./mapa.html">Mapa</a></li>
                            <li><a href="./tips.html">Tips del Viajero</a></li>
                        </ul>
                    </li>
                    <li><a href="./blog.html">Blog</a></li>
                    <li><a href="./contacts.html">Contacto</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <header class="header-image ken-burn-center light" data-parallax="true" data-natural-height="1080" data-natural-width="1920" data-bleed="0" data-image-src="../assets/images/laguna rica.jpg" data-offset="0">
        <div class="container">
            <h1>Artesanos y Guías</h1>
            <h2>Conoce a las personas que hacen especial a Cómbita</h2>
            <ol class="breadcrumb">
                <li><a href="./index.html">Inicio</a></li>
                <li><a href="#">Descubre</a></li>
                <li><a href="#">Artesanos y Guías</a></li>
            </ol>
        </div>
    </header>

    <main>
        <!-- Intro -->
        <section class="section-base">
            <div class="container">
                <div class="title align-center">
                    <h2>Nuestra Comunidad</h2>
                    <p>En Cómbita, cada artesano guarda en sus manos siglos de tradición y cada guía conoce los secretos que solo el páramo revela. Conócelos y vive una experiencia auténtica.</p>
                </div>
            </div>
        </section>

        <!-- Artesanos Section -->
        <section class="section-base section-color" id="seccion-artesanos">
            <div class="container">
                <div class="title align-center">
                    <h2><i class="fas fa-palette" style="color:#BC6C25;margin-right:10px;"></i>Nuestros Artesanos</h2>
                    <p>Manos creadoras que preservan la tradición boyacense a través de tejidos, cerámica, talla en madera y más.</p>
                </div>
                <div class="row" id="artesanosGrid">
                    <div class="ag-empty col-lg-12">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Cargando artesanos...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Guías Section -->
        <section class="section-base" id="seccion-guias">
            <div class="container">
                <div class="title align-center">
                    <h2><i class="fas fa-hiking" style="color:#BC6C25;margin-right:10px;"></i>Guías Turísticos</h2>
                    <p>Expertos locales que te llevarán por los senderos, historias y rincones más hermosos de nuestro municipio.</p>
                </div>
                <div class="row" id="guiasGrid">
                    <div class="ag-empty col-lg-12">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Cargando guías...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- CTA -->
        <section class="ag-cta">
            <div class="container">
                <h3>¿Eres artesano o guía en Cómbita?</h3>
                <p>Únete a nuestra plataforma y da a conocer tu trabajo a turistas de todo el país.</p>
                <a href="./contacts.html" class="ag-cta-btn">
                    <i class="fas fa-envelope"></i> Contáctanos
                </a>
            </div>
        </section>
    </main>

    <footer class="light">
        <div class="container">
            <div class="row">
                <div class="col-lg-4">
                    <h3>Cómbita</h3>
                    <p>En algún lugar entre el inicio de la ascensión y la cima, se encuentra la respuesta al misterio de por qué subimos.</p>
                </div>
                <div class="col-lg-4">
                    <h3>Contacto</h3>
                    <ul class="icon-list icon-line">
                        <li>Cómbita, Boyacá, Colombia</li>
                        <li>alcaldia@combita-boyaca.gov.co</li>
                        <li>313 366232</li>
                    </ul>
                </div>
                <div class="col-lg-4">
                    <div class="icon-links icon-social icon-links-grid social-colors">
                        <a class="facebook"><i class="icon-facebook"></i></a>
                        <a class="instagram"><i class="icon-instagram"></i></a>
                        <a class="x"><i class="icon-twitter"></i></a>
                        <a class="youtube"><i class="icon-youtube"></i></a>
                    </div>
                    <hr class="space-sm" />
                    <p>Síguenos en nuestras redes</p>
                </div>
            </div>
        </div>
        <div class="footer-bar">
            <div class="container">
                <span>&copy; 2024 Santiago Quiroga Molina <a href="https://santiago-developer.netlify.app/" target="_blank">santiago-developer.com</a>.</span>
                <span><a href="./contacts.html">Contacto</a> | <a href="./privacidad.html">Política de privacidad</a></span>
            </div>
        </div>
    </footer>

    <script src="../assets/js/vendor/parallax.min.js"></script>
    <script src="../assets/js/vendor/glide.min.js"></script>
    <script src="../assets/js/vendor/imagesloaded.min.js"></script>

    <script>
        const API_URL = window.location.origin + '/api';

        document.addEventListener('DOMContentLoaded', () => {
            loadArtesanos();
            loadGuias();
        });

        function formatWhatsApp(phone) {
            return phone.replace(/\s+/g, '').replace(/^\+?/, '');
        }

        function renderCard(item, type) {
            const icon = type === 'artesano' ? 'fa-palette' : 'fa-hiking';
            const waMsg = type === 'artesano'
                ? `Hola%20${encodeURIComponent(item.nombre)}%2C%20vi%20tu%20perfil%20en%20Turismo%20Cómbita`
                : `Hola%20${encodeURIComponent(item.nombre)}%2C%20quisiera%20contratar%20un%20tour%20en%20Cómbita`;

            return `
            <div class="col-lg-4 col-md-6">
                <div class="ag-card">
                    <div class="ag-card-img">
                        ${item.imagen
                            ? `<img src="${item.imagen}" alt="${item.nombre}" onerror="this.parentElement.innerHTML='<div class=\\'ag-placeholder\\'><i class=\\'fas ${icon}\\'></i></div>'">`
                            : `<div class="ag-placeholder"><i class="fas ${icon}"></i></div>`
                        }
                        <span class="ag-badge"><i class="fas fa-star" style="margin-right:5px;font-size:11px;"></i> ${item.especialidad}</span>
                    </div>
                    <div class="ag-card-body">
                        <h3>${item.nombre}</h3>
                        ${item.ubicacion ? `<div class="ag-card-location"><i class="fas fa-map-marker-alt"></i> ${item.ubicacion}</div>` : ''}
                        ${item.descripcion ? `<p class="ag-card-desc">${item.descripcion}</p>` : ''}
                        ${type === 'guia' ? `
                            <div class="ag-meta">
                                ${item.experiencia ? `<span class="ag-meta-tag"><i class="fas fa-clock"></i> ${item.experiencia}</span>` : ''}
                                ${item.idiomas ? `<span class="ag-meta-tag"><i class="fas fa-language"></i> ${item.idiomas}</span>` : ''}
                                ${item.certificaciones ? `<span class="ag-meta-tag"><i class="fas fa-certificate"></i> ${item.certificaciones}</span>` : ''}
                            </div>
                            ${item.rutas_conocidas ? `
                                <div class="ag-routes">
                                    <div class="ag-routes-label"><i class="fas fa-route"></i> Rutas que conoce</div>
                                    <p>${item.rutas_conocidas}</p>
                                </div>
                            ` : ''}
                        ` : ''}
                        <div class="ag-actions">
                            ${item.whatsapp
                                ? `<a href="https://wa.me/57${formatWhatsApp(item.whatsapp)}?text=${waMsg}" target="_blank" class="ag-btn ag-btn-whatsapp"><i class="fab fa-whatsapp"></i> WhatsApp</a>`
                                : ''
                            }
                            ${item.telefono
                                ? `<a href="tel:${item.telefono.replace(/\s/g, '')}" class="ag-btn ag-btn-call"><i class="fas fa-phone-alt"></i> Llamar</a>`
                                : ''
                            }
                            ${!item.whatsapp && !item.telefono ? '<span style="color:#999;font-size:13px;padding:10px 0;">Contacto no disponible</span>' : ''}
                        </div>
                    </div>
                </div>
            </div>`;
        }

        async function loadArtesanos() {
            const grid = document.getElementById('artesanosGrid');
            try {
                const res = await fetch(`${API_URL}/artesanos`);
                const artesanos = await res.json();
                const activos = artesanos.filter(a => a.activo !== false);

                if (activos.length === 0) {
                    grid.innerHTML = '<div class="ag-empty col-lg-12"><i class="fas fa-palette"></i><p>Próximamente conocerás a nuestros artesanos.</p></div>';
                    return;
                }

                grid.innerHTML = activos.map(a => renderCard(a, 'artesano')).join('');
            } catch (error) {
                console.error('Error:', error);
                grid.innerHTML = '<div class="ag-empty col-lg-12"><i class="fas fa-exclamation-triangle"></i><p>Error cargando artesanos</p></div>';
            }
        }

        async function loadGuias() {
            const grid = document.getElementById('guiasGrid');
            try {
                const res = await fetch(`${API_URL}/guias`);
                const guias = await res.json();
                const activos = guias.filter(g => g.activo !== false);

                if (activos.length === 0) {
                    grid.innerHTML = '<div class="ag-empty col-lg-12"><i class="fas fa-hiking"></i><p>Próximamente conocerás a nuestros guías.</p></div>';
                    return;
                }

                grid.innerHTML = activos.map(g => renderCard(g, 'guia')).join('');
            } catch (error) {
                console.error('Error:', error);
                grid.innerHTML = '<div class="ag-empty col-lg-12"><i class="fas fa-exclamation-triangle"></i><p>Error cargando guías</p></div>';
            }
        }
    </script>
</body>
</html>
